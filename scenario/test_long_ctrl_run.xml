<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="http://jsbsim.sf.net/JSBSimScript.xsl"?>
<runscript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jsbsim.sf.net/JSBSimScript.xsd" name="test_long_ctrl_run">
  <use aircraft="Viper-JSBSim" initialize="reset_midflight" />
  <output name="viper5000.csv" rate="10000" type="CSV">
    <rates>ON</rates>
    <velocities>ON</velocities>
    <forces>ON</forces>
    <moments>ON</moments>
    <position>ON</position>
    <massprops>ON</massprops>
    <property>position/vrp-gc-latitude_deg</property>
    <property>position/vrp-longitude_deg</property>
    <property>position/vrp-radius-ft</property>
    <property>forces/hold-down</property>
    <property>gear/unit[0]/compression-ft</property>
    <property>gear/unit[1]/compression-ft</property>
    <property>gear/unit[2]/compression-ft</property>
    <property>accelerations/wdot-ft_sec2</property>
    <property>accelerations/udot-ft_sec2</property>
    <property>accelerations/vdot-ft_sec2</property>
    <property>velocities/thetadot-rad_sec</property>
    <property>velocities/phidot-rad_sec</property>
    <property>velocities/psidot-rad_sec</property>
    <property>fcs/elevator-pos-rad</property>
    <property>fcs/left-aileron-pos-rad</property>
    <property>fcs/right-aileron-pos-rad</property>
    <property>fcs/flap-pos-rad</property>
    <property>fcs/rudder-pos-rad</property>
    <property>fcs/throttle-cmd-norm</property>
    <property>attitude/roll-rad</property>
    <property>attitude/pitch-rad</property>
    <property>attitude/heading-true-rad</property>
    <property>attitude/psi-rad</property>
    <property>attitude/theta-rad</property>
    <property>attitude/phi-rad</property>
    <property>velocities/u-aero-fps</property>
    <property>velocities/v-aero-fps</property>
    <property>velocities/w-aero-fps</property>
    <property>simulation/integrator/position/translational</property>
    <property>simulation/integrator/position/rotational</property>
    <property>propulsion/total-fuel-lbs</property>
  </output>
  <run start="0.0" end="150" dt="0.001">
    <description>Viper Longitudinal Control</description>
    <property>simulation/notify-time-trigger</property>
    <event name="Start engine">
      <description>Start engine and set initial heading and waypoints, turn on heading-hold mode.</description>
      <condition>simulation/sim-time-sec ge 0.25</condition>
      <set name="/controls/engines/engine[0]/starter" value="1"></set>
      <set name="propulsion/cutoff_cmd" value="0"></set>
      <set name="propulsion/starter_cmd" value="1"></set>
    </event>
    <event name="Time Notify" persistent="true">
      <description>Output message at 1 second intervals</description>
      <notify>
        <property>velocities/vc-kts</property>
        <property>position/h-agl-ft</property>
        <property>aero/alpha-rad</property>
        <property>attitude/pitch-rad</property>
        <property>velocities/thetadot-rad_sec</property>
        <property>attitude/psi-rad</property>
        <property>attitude/theta-rad</property>
        <property>attitude/phi-rad</property>
        <property>accelerations/wdot-ft_sec2</property>
        <property>accelerations/udot-ft_sec2</property>
        <property>accelerations/vdot-ft_sec2</property>
        <property>velocities/thetadot-rad_sec</property>
        <property>velocities/phidot-rad_sec</property>
        <property>velocities/psidot-rad_sec</property>
        <property>fcs/elevator-pos-rad</property>
        <property>fcs/left-aileron-pos-rad</property>
        <property>fcs/rudder-pos-rad</property>
        <property>propulsion/total-fuel-lbs</property>
      </notify>
      <condition>simulation/sim-time-sec &gt;= simulation/notify-time-trigger</condition>
      <set name="simulation/notify-time-trigger" value="1" type="delta"></set>
    </event>
  </run>
</runscript>
